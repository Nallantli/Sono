load "system";
load "vector";
load "socket";

var server = new Server(5000);

var s;
s != "exit" do {
	print("Awaiting Client...");
	var socket = server.accept();
	print("Client Connected.");

	var input = socket.getInput();
	var output = socket.getOutput();

	s = input.read();
	s != "" && s != "exit" do {
		print("Server Recieved:\t" + s);
		var res = (vec s).reverse().join();
		print("Sending Back:\t" + res);
		output.send(res);
		s = input.read();
	};
	input.close();
	output.close();
	socket.close();
	print("Client Disconnected.");
};
print("Server Shutting Down...");

server.close();
print("Done.");