load "system";
load "vector";
load "socket";

var server = new Server(5000);

print("Awaiting Client...");
var socket = server.accept();
print("Client Connected.");

var input = socket.getInput();
var output = socket.getOutput();

var s;
(s = input.read()) != "" do {
	print("Server Recieved:\t" + s);
	var res = (vec s).reverse().join();
	print("Sending Back:\t" + res);
	output.send(res);
};

input.close();
output.close();
socket.close();
server.close();