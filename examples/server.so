load "system";
load "vector";
load "socket";

var server = new Server(5000);

var s;
s != "exit" do {
	println("Awaiting Client...");
	var socket = server.accept();
	println("Client Connected.");

	var input = socket.getInput();
	var output = socket.getOutput();

	s = input.read();
	s != "" && s != "exit" do {
		println("Server Recieved:\t" + s);
		var res = (vec s).reverse().join();
		println("Sending Back:\t" + res);
		output.send(res);
		s = input.read();
	};
	input.close();
	output.close();
	socket.close();
	println("Client Disconnected.");
};
println("Server Shutting Down...");

server.close();
println("Done.");